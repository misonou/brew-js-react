!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe"),require("jQuery")):"function"==typeof define&&define.amd?define("brew-js-react",["brew-js","react","react-dom","zeta-dom","zeta-dom-react","waterpipe","jQuery"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe"),require("jQuery")):e["brew-js-react"]=t(e.brew,e.React,e.ReactDOM,e.zeta,e["zeta-dom-react"],e.waterpipe,e.jQuery)}(self,(function(e,t,n,r,i,o,a){return(()=>{var s={145:e=>{"use strict";e.exports=a},28:e=>{"use strict";e.exports=o},103:e=>{"use strict";e.exports=i},80:t=>{"use strict";t.exports=e},359:e=>{"use strict";e.exports=t},318:e=>{"use strict";e.exports=n},654:e=>{"use strict";e.exports=r},346:(e,t,n)=>{var r=window.jQuery||n(145);e.exports=r},43:(e,t,n)=>{var r=window.waterpipe||n(28);e.exports=r}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={exports:{}};return s[e](n,n.exports,c),n.exports}c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";c.d(l,{default:()=>Vt});var e={};c.r(e),c.d(e,{AnimateMixin:()=>Ze,AnimateSequenceItemMixin:()=>Je,AnimateSequenceMixin:()=>Ye,ClassNameMixin:()=>He,Dialog:()=>re,ErrorHandlerMixin:()=>nt,FlyoutMixin:()=>lt,FlyoutToggleMixin:()=>at,FocusStateMixin:()=>mt,LoadingStateMixin:()=>pt,Mixin:()=>Le,ScrollableMixin:()=>vt,StatefulMixin:()=>Qe,ViewStateContainer:()=>Re,createDialog:()=>ne,default:()=>Nt,isViewMatched:()=>ye,linkTo:()=>xe,makeTranslation:()=>ze,navigateTo:()=>Ce,redirectTo:()=>Ee,registerView:()=>we,renderView:()=>be,useAnimateMixin:()=>bt,useAnimateSequenceMixin:()=>xt,useAppReady:()=>Oe,useErrorHandlerMixin:()=>Ct,useFlyoutMixin:()=>Et,useFocusStateMixin:()=>St,useLanguage:()=>ke,useLoadingStateMixin:()=>Pt,useMixin:()=>Mt,useMixinRef:()=>Ot,useRouteParam:()=>Ne,useRouteState:()=>Ve,useScrollableMixin:()=>At,useViewContainerState:()=>ve});var t=c(80);const n=t;var r=t.install;t.addExtension,t.addDetect;const i=n;var o=c(359),a=c(318),s=c(654),u=s.util,f=u.noop,m=u.pipe,d=u.either,p=u.is,h=(u.isUndefinedOrNull,u.isArray,u.isFunction),g=(u.isThenable,u.isPlainObject,u.isArrayLike,u.makeArray),v=u.extend,y=u.each,w=u.map,b=u.grep,x=(u.splice,u.any),C=u.single,E=u.kv,S=u.pick,P=(u.exclude,u.mapGet,u.mapRemove,u.arrRemove,u.setAdd,u.equal),A=u.combineFn,M=(u.executeOnce,u.createPrivateStore),O=(u.setTimeout,u.setTimeoutOnce,u.setInterval,u.setIntervalSafe,u.setImmediate),N=u.setImmediateOnce,V=u.throwNotFunction,R=(u.errorWithCode,u.keys),j=u.values,I=(u.hasOwnProperty,u.getOwnPropertyDescriptors,u.define),T=u.definePrototype,F=(u.defineOwnProperty,u.defineGetterProperty),q=u.defineHiddenProperty,k=u.defineAliasProperty,z=(u.defineObservableProperty,u.watch,u.watchOnce,u.watchable),D=u.inherit,L=(u.freeze,u.deepFreeze,u.iequal,u.randomId),U=(u.repeat,u.camel,u.hyphenate,u.ucfirst,u.lcfirst,u.trim,u.matchWord,u.htmlDecode,u.resolve),_=(u.reject,u.always),Q=(u.resolveAll,u.catchAsync),W=(u.setPromiseTimeout,s.util),B=(W.domReady,W.tagName,W.isVisible,W.matchSelector,W.comparePosition,W.connected,W.containsOrEquals),H=(W.acceptNode,W.combineNodeFilters,W.iterateNode,W.iterateNodeToArray,W.getCommonAncestor,W.parentsAndSelf,W.selectIncludeSelf,W.selectClosestRelative,W.createNodeIterator,W.createTreeWalker,W.bind,W.bindUntil,W.dispatchDOMMouseEvent,W.removeNode),G=(W.getClass,W.setClass);W.getScrollOffset,W.getScrollParent,W.getContentRect,W.scrollBy,W.scrollIntoView,W.makeSelection,W.getRect,W.getRects,W.toPlainRect,W.rectEquals,W.rectCovers,W.rectIntersects,W.pointInRect,W.mergeRect,W.elementFromPoint;const Z=s.dom;var $=s.dom;$.textInputAllowed,$.beginDrag,$.beginPinchZoom,$.getShortcut,$.setShortcut,$.focusable,$.focused,$.setModal,$.releaseModal,$.retainFocus,$.releaseFocus,$.iterateFocusPath,$.focus;const J=Z;var K=s.dom,X=K.lock,Y=(K.locked,K.cancelLock,K.notifyAsync),ee=(K.preventLeave,t.addAsyncAction,t.closeFlyout),te=t.openFlyout;function ne(e){var t,n=document.createElement("div"),r=!1;function i(t){r||(r=!0,ee(n,t).then((function(){r=!1,H(n),(e.onClose||f)(n),e.onRender&&a.unmountComponentAtNode(n)})))}return{root:n,close:i,open:function(){if(t)return t;if(n.className=e.className||"",document.body.appendChild(n),J.retainFocus(J.activeElement,n),e.modal&&(n.setAttribute("is-modal",""),J.setModal(n)),e.onRender){var r=v({},e,{closeDialog:function(t){var n=U((e.onCommit||m)(t));Q(X(J.activeElement,n)),n.then(i)}});a.render(o.createElement(e.onRender,r),n)}return t=te(n),_(t,(function(){t=null})),(e.onOpen||f)(n),t}}}function re(e){var t=(0,o.useState)(e)[0],n=(0,o.useState)((function(){return ne(t)}))[0];return v(t,e),(0,o.useEffect)((function(){var e=B(J.root,n.root);d(e,t.isOpen)&&(e?n.close():n.open())}),[t.isOpen]),(0,o.useEffect)((function(){return n.close}),[n]),a.createPortal(e.children,n.root)}var ie=c(103),oe=s.EventContainer;const ae=t.defaults;var se;r("react",(function(e){se=e})),ae.react=!0;var ue,ce=t.animateIn,le=t.animateOut,fe=(t.addAnimateIn,t.addAnimateOut,J.root),me=new Map,de={},pe=o.createContext(Object.freeze({active:!0}));function he(){var e=this;o.Component.apply(e,arguments),e.mounted=!1,ue||(ue=history.state,se.on("navigate",(function(){ue=history.state}))),e.componentWillUnmount=se.on("navigate",(function(){e.mounted&&e.getViewComponent()&&(e.isForceUpdate=!0,e.forceUpdate())}))}function ge(e,t){var n=me.get(e);if(!n.maxParams){var r=w(se.routes,(function(e){var t=se.parseRoute(e),r=t.length&&!x(n.matchers,(function(e,n){var r=t.params[n];return(e?!(r>=0):r<t.minLength)||!h(e)&&!t.match(n,e)}));return r?t:null}));if(r[1]&&(r=b(r,(function(e){return!x(e.params,(function(e,t){return de[t]&&!n.matchers[t]}))}))),r[0]){var i=r.slice(-1)[0];n.maxParams=R(v.apply(0,[{}].concat(r.map((function(e){return e.params}))))),n.minParams=w(i.params,(function(e,t){return n.params[t]||e>=i.minLength?null:t}))}}return S(se.route,t?n.maxParams:n.minParams)}function ve(){return o.useContext(pe)}function ye(e){var t=me.get(e);return!!t&&!1===x(t.matchers,(function(e,t){var n=se.route[t]||"";return h(e)?!e(n):(e||"")!==n}))}function we(e,t){var n=function(t){var n=(0,ie.useAsync)(e),r=(0,o.useRef)();return(n[0]||n[1].error)&&(t.onComponentLoaded||f)(r.current),o.createElement("div",v({},t.rootProps,{ref:r,children:n[0]&&o.createElement(n[0].default)}))};return t=v({},t),y(t,(function(e,n){de[e]=!0,n instanceof RegExp&&(t[e]=n.test.bind(n))})),me.set(n,{id:L(),matchCount:R(t).length,matchers:t,params:S(t,(function(e){return"string"==typeof e}))}),n}function be(){var e=g(arguments),t=h(e[0])?{}:e.shift(),n=e[0];return e.sort((function(e,t){return(me.get(t)||{}).matchCount-(me.get(e)||{}).matchCount})),o.createElement(he,{rootProps:t,views:e,defaultView:n})}function xe(e,t){var n=me.get(e);if(!n)return"/";var r=v(ge(e),t,n.params);return se.route.getPath(r)}function Ce(e,t){return se.navigate(xe(e,t))}function Ee(e,t){return se.navigate(xe(e,t),!0)}T(he,o.Component,{componentDidMount:function(){this.mounted=!0},componentDidCatch:function(e){J.emit("error",this.parentElement||fe,{error:e},!0)},render:function(){var e,t=this,n=new Promise((function(t){e=t})),r=t.getViewComponent();if(r&&r!==t.currentViewComponent){if(t.currentViewComponent=r,t.currentView&&t.currentElement){var i=t.currentPath,a=t.currentElement;t.prevView=t.currentView,t.currentElement=void 0,se.emit("pageleave",a,{pathname:i},!0),le(a,"show").then((function(){t.prevView=void 0,t.forceUpdate()}))}var s={key:me.get(r).id,value:{}},u=o.createElement(pe.Provider,s,o.createElement(Re,null,o.createElement(r,{rootProps:t.props.rootProps,onComponentLoaded:function(n){t.currentElement=n,t.parentElement=n.parentElement,O((function(){e(),ce(n,"show"),se.emit("pageenter",n,{pathname:se.path},!0)}))}})));F(s.value,"active",(function(){return t.currentView===u})),t.currentPath=se.path,t.currentView=u}else t.isForceUpdate&&(t.isForceUpdate=!1,se.emit("pageenter",t.currentElement,{pathname:se.path},!0)),e();return Y(t.parentElement||fe,n),o.createElement(o.Fragment,null,t.prevView,t.currentView)},getViewComponent:function(){var e=this.props,t=x(e.views,ye)||e.defaultView;if(history.state===ue){var n=xe(t,ge(t,!0));if(n!==se.path)return void se.navigate(n,!0)}return t}});var Se=new oe,Pe={};function Ae(){return Pe[history.state]||(Pe[history.state]={})}function Me(e){this.value=e}function Oe(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return(0,o.useEffect)((function(){se.ready.then((function(){n(!0)}))}),[]),t}function Ne(e,t){var n=ve(),r=se.route,i=r[e]||"",a=(0,o.useRef)(i),s=(0,o.useState)()[1];return(0,o.useEffect)((function(){var t=function(){var t=r[e]||"";n.active&&t!==a.current&&(a.current=t,s({}))};if(t(),e in r)return r.watch(e,(function(){N(t)}));console.error("Route parameter "+e+" does not exist")}),[e,t]),a.current=i,i||void 0===t||se.navigate(r.getPath(v({},r,E(e,t))),!0),i}function Ve(e,t){var n=ve(),r=Ae(),i=(0,o.useState)(e in r?r[e]:t);return n.active&&(r[e]=i[0]),i}function Re(e){var t=ve(),n=(0,o.useState)((function(){var e={};return{getState:function(n,r){var i=Ae(),o=e[n]||(e[n]=new Me(i[r]&&i[r].value));if(t.active){var a=o.stateId;if(a&&a!==history.state){var s=i[r]&&i[r].value;Se.emit("popstate",o,{newValue:s});var u=new Me(o.value);Pe[a][r]=u,o.value=s}o.stateId=history.state,i[r]=o}return o}}}))[0];return(0,o.createElement)(ie.ViewStateProvider,{value:n},e.children)}T(Me,{get:function(){return this.value},set:function(e){this.value=e},onPopState:function(e){return V(e),Se.add(this,"popstate",(function(t){e.call(this,t.newValue)}))}});var je=c(43),Ie=Object.create(null),Te="function"==typeof Symbol&&Symbol.toPrimitive;function Fe(e){this.toString=e}function qe(e){return v((function(t,n){var r=e(t,n,!0);return void 0!==r?r:t}),{html:function(t,n){return{__html:e(t,n)}},lazy:function(t,n){return new Fe(e.bind(0,t,n,!0))}})}function ke(){return(0,ie.useObservableProperty)(se,"language")}function ze(e,t){var n=new RegExp("^("+Object.keys(e[t]).join("|")+")\\."),r={};function i(n,r,o,a,s){var u=((e[s]||Ie)[n]||Ie)[r];return"string"==typeof u?!u||a&&void 0===o?u:je(u,o,{noEncode:a}):s!==t?i(n,r,o,a,t):void 0}function o(){var e=g(arguments),t=e.join(" ");return r[t]||(r[t]=qe((function(t,n,r){var o=se.language;return C(e,(function(e){return i(e,t,n,r,o)}))})))}return r[""]=qe((function(e,t,r){var o=n.test(e)?RegExp.$1:"";return i(o,o?e.slice(RegExp.lastMatch.length):e,t,r,se.language)})),{translate:r[""],getTranslation:o,useTranslation:function(){var e=ke(),t=o.apply(0,arguments);return{language:e,t}},keys:function(n){return R(e[t][n]||Ie)}}}function De(e){Le.call(this),this.attributes=e||{}}function Le(){}Te&&(Fe.prototype[Te]=function(){return this.toString()}),T(De,Le,{getCustomAttributes:function(){return v({},this.attributes)}}),T(Le,{next:function(){},getRef:function(){return f},getClassNames:function(){return[]},getCustomAttributes:function(){return{}},dispose:function(){}}),z(Le.prototype),I(Le,{get scrollableTarget(){return new De({"scrollable-target":""})},use:function(){var e=g(arguments),t=e[0],n={},r=e.filter((function(e){return e instanceof Le})),i=r.map((function(e){return e.getRef()}));return!t||t instanceof Le?t||e.shift():("function"!=typeof t?i.push((function(e){t.current=e})):i.push(t),e.shift()),y(r,(function(e,t){v(n,t.getCustomAttributes())})),v(n,{ref:A(i),className:ie.classNames.apply(null,e)}),y(r,(function(e,t){t.next()})),n}});var Ue=M();function _e(e){this.mixin=e}function Qe(){Le.call(this),Ue(this,{states:{},prefix:"",counter:0})}T(_e,{getMixin:function(){return this.mixin}}),T(Qe,Le,{get ref(){var e=this,t=e.state;return e.next(),t.ref||(t.ref=new _e(e.clone()))},get state(){var e=Ue(this),t=e.prefix+e.counter;return e.states[t]||(e.states[t]=this.initState())},reset:function(){return Ue(this).counter=0,this},next:function(){return Ue(this).counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n&&n!==t.element&&(t.element=n,e.initElement(n,t))}},elements:function(){return j(Ue(this).states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){var e=this,t=D(Object.getPrototypeOf(e),e);return Ue(t,{states:Ue(e).states,prefix:L()+".",counter:0}),t},dispose:function(){var e=Ue(this).states;y(e,(function(t,n){delete e[t]}))}});var We=Qe.prototype;function Be(e,t,n,r){var i=n.classNames,o=v({},i);if(y(e.classNames,(function(e,n){i[n]=t.classList.contains(n)})),!P(o,i)){var a=e.onClassNameUpdated.bind(e,t,o,v({},i));r?setImmediate(a):a()}}function He(e){Qe.call(this),this.classNames=e||[]}T(He,Qe,{getClassNames:function(){return[this.state.classNames]},getRef:function(){var e=this,t=e.state.element;return t&&B(root,t)&&Be(e,t,e.state,!0),We.getRef.call(this)},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;J.watchAttributes(e,["class"],(function(r){r.includes(e)&&Be(n,e,t)}))},onClassNameUpdated:function(e,t,n){}});var Ge=He.prototype;function Ze(){He.call(this,["tweening-in","tweening-out"])}T(Ze,He,{next:function(){var e=this;return e.effects=void 0,e.trigger=void 0,Ge.next.call(e)},with:function(e){var t=this;return t.effects=e.effects,t.trigger=e.trigger,t},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return v({},Ge.getCustomAttributes.call(e),{"animate-in":(e.effects||[]).join(" "),"animate-on":e.trigger||"show"})}});var $e=He.prototype;function Je(e){He.call(this,["tweening-in","tweening-out"]),this.className=e}T(Je,He,{getClassNames:function(){return[this.className].concat($e.getClassNames.call(this))}});var Ke=Ze.prototype,Xe=0;function Ye(){var e=this;Ze.call(e),e.className="brew-anim-"+ ++Xe,e.item=new Je(e.className)}T(Ye,Ze,{reset:function(){return this.item.reset(),Ke.reset.call(this)},getCustomAttributes:function(){return v({},Ke.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return v(Ke.clone.call(this),{item:this.item.ref.getMixin()})}});var et=Qe.prototype,tt=new oe;function nt(){Qe.call(this)}T(nt,Qe,{catch:function(e,t){return t||(t=e,e=null),tt.add(this,e?"error":"default",(function(n){if(!e||function(e,t){return h(e)?p(t,e):t&&t.code===e}(e,n.error))return t(n.error)}))},initElement:function(e,t){var n=this;et.initElement.call(n,e,t),J.on(e,"error",(function(e){var t={error:e.error};return tt.emit("error",n,t)||tt.emit("default",n,t)}))}});(void 0).getVarScope,(void 0).setVar;var rt=(void 0).declareVar,it=((void 0).resetVar,(void 0).getVar),ot=((void 0).evaluate,(void 0).evalAttr,He.prototype);function at(e){He.call(this,["target-opened"]),this.flyoutMixin=e}T(at,He,{open:function(e){return this.flyoutMixin.open(e)},close:function(e){return this.flyoutMixin.close(e)},getCustomAttributes:function(){var e=this.flyoutMixin.elements()[0];return v({},ot.getCustomAttributes.call(this),{toggle:e&&"#"+e.id})}});var st=He.prototype,ut="__flyout"+L(),ct=0;function lt(){var e=this;He.call(e,["open","closing","visible","tweening-in","tweening-out"]),e.modal=!1,e.tabThrough=!1,e.isFlyoutOpened=!1,e.animating=!1,e.visible=!1,e.toggle=new at(e)}T(lt,He,{reset:function(){return this.toggle.reset(),st.reset.call(this)},next:function(){return this.effects=void 0,st.next.call(this)},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return v({},st.getCustomAttributes.call(e),{"is-flyout":"","swipe-dismiss":e.swipeToDismiss},e.modal&&{"is-modal":""},e.tabThrough&&{"tab-through":""},e.effects&&{"animate-on":"open","animate-in":e.effects.join(" "),"animate-out":""})},open:function(e){return te(this.elements()[0],E(ut,e))},close:function(e){return ee(this.elements()[0],e)},onOpen:function(e){var t=this.elements()[0];return this.onToggleState((function(n){if(n)return e(it(t,ut))}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;st.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++ct,rt(e,ut,void 0)),se.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){y(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=this,t=v(st.clone.call(e),{toggle:e.toggle.ref.getMixin()});return k(t,"isFlyoutOpened",e),k(t,"modal",e),t},onClassNameUpdated:function(e,t,n){this.visible=n.open,this.isFlyoutOpened=n.open&&!n.closing&&!n["tweening-out"]}});var ft=Qe.prototype;function mt(){Qe.call(this)}T(mt,Qe,{initElement:function(e,t){ft.initElement.call(this,e,t),J.on(e,{focusin:function(n){t.focused=!0,G(e,"focused",n.source)},focusout:function(){t.focused=!1,G(e,"focused",!1)}})},getClassNames:function(){return[{focused:!!this.state.focused}]}});var dt=Qe.prototype;function pt(){Qe.call(this)}T(pt,Qe,{initElement:function(e,t){dt.initElement.call(this,e,t),J.on(e,{asyncStart:function(){t.loading=!0,G(e,"loading",!0)},asyncEnd:function(){t.loading=!1,G(e,"loading",!1)},cancelled:function(){t.loading=!1,G(e,"loading",!1)}})},getClassNames:function(){return[{loading:!!this.state.loading}]}});var ht=c(346),gt=He.prototype;function vt(){var e=this;He.call(e,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),e.target=Le.scrollableTarget,e.pageIndex=0,e.scrolling=!1}function yt(e){v(this,e)}function wt(e){return function(){var t=Mt(e);return(t.withOptions||yt).apply(t,arguments),t}}T(vt,He,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return v({},gt.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;se.on(e,{statechange:function(e){"pageIndex"in e.newValues&&v(n,{pageIndex:e.newValues.pageIndex})},scrollStart:function(){n.scrolling=!0},scrollStop:function(){n.scrolling=!1}},!0)},clone:function(){var e=gt.clone.call(this);return k(e,"pageIndex",this),e}}),y("destroy enable disable setOptions refresh scrollPadding stop scrollLeft scrollTop scrollBy scrollTo scrollByPage scrollToPage scrollToElement",(function(e,t){q(vt.prototype,t,(function(){var e=ht(this.elements());return e.scrollable.apply(e,[t].concat(g(arguments)))}))}));var bt=wt(Ze),xt=wt(Ye),Ct=wt(nt),Et=wt(lt),St=wt(mt),Pt=wt(pt),At=wt(vt);function Mt(e){var t=(0,o.useState)((function(){return new e}))[0].reset();return(0,o.useEffect)((function(){return t.dispose.bind(t)}),[]),t}function Ot(e){return e&&e.getMixin().reset()}const Nt=i,Vt=e})(),l=l.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map