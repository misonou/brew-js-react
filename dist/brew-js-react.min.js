!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):"function"==typeof define&&define.amd?define("brew-js-react",["brew-js","react","react-dom","zeta-dom","zeta-dom-react","waterpipe"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):e["brew-js-react"]=t(e.brew,e.React,e.ReactDOM,e.zeta,e["zeta-dom-react"],e.waterpipe)}(self,(function(e,t,n,i,r,o){return(()=>{var s={28:e=>{"use strict";e.exports=o},103:e=>{"use strict";e.exports=r},80:t=>{"use strict";t.exports=e},359:e=>{"use strict";e.exports=t},318:e=>{"use strict";e.exports=n},654:e=>{"use strict";e.exports=i},43:(e,t,n)=>{var i=window.waterpipe||n(28);e.exports=i}},a={};function u(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e](n,n.exports,u),n.exports}u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";u.d(c,{default:()=>Te});var e={};u.r(e),u.d(e,{AnimateMixin:()=>se,AnimateSequenceItemMixin:()=>ue,AnimateSequenceMixin:()=>fe,ClassNameMixin:()=>re,Dialog:()=>W,FlyoutMixin:()=>de,FocusStateMixin:()=>ge,LoadingStateMixin:()=>we,Mixin:()=>ee,ScrollableMixin:()=>ye,StatefulMixin:()=>ne,createDialog:()=>_,default:()=>Ve,linkTo:()=>Fe,makeTranslation:()=>X,registerView:()=>je,renderView:()=>qe,useAnimateMixin:()=>Se,useAnimateSequenceMixin:()=>Ee,useAppReady:()=>H,useFlyoutMixin:()=>Ce,useFocusStateMixin:()=>Ae,useLanguage:()=>Q,useLoadingStateMixin:()=>Ne,useMixinRef:()=>Oe,useRouteParam:()=>Z,useScrollableMixin:()=>xe});var t=u(80);const n=t;var i=t.install;t.addDetect;const r=n;var o=u(359),s=u(318),a=u(654),l=a.util,f=l.noop,m=l.either,p=(l.is,l.isUndefinedOrNull,l.isArray,l.isFunction,l.isThenable,l.isPlainObject,l.isArrayLike,l.makeArray),d=l.extend,h=l.each,g=(l.map,l.grep,l.splice,l.any),v=l.single,w=l.kv,b=l.pick,y=l.exclude,x=(l.mapGet,l.mapRemove,l.arrRemove,l.setAdd,l.equal),C=l.combineFn,S=(l.executeOnce,l.createPrivateStore,l.setTimeoutOnce,l.setImmediate),E=(l.setImmediateOnce,l.throwNotFunction,l.keys),A=l.values,N=(l.hasOwnProperty,l.getOwnPropertyDescriptors,l.define),O=l.definePrototype,M=(l.defineOwnProperty,l.defineGetterProperty,l.defineHiddenProperty,l.defineAliasProperty),P=(l.defineObservableProperty,l.watch,l.watchOnce,l.watchable),R=l.inherit,I=(l.deepFreeze,l.iequal,l.randomId),j=(l.repeat,l.camel,l.hyphenate,l.ucfirst,l.lcfirst,l.trim,l.matchWord,l.htmlDecode,l.resolve,l.reject,l.always),q=(l.resolveAll,l.catchAsync,l.setPromiseTimeout,a.util),F=(q.domReady,q.tagName,q.is,q.isVisible,q.matchSelector,q.comparePosition,q.connected,q.containsOrEquals),V=(q.acceptNode,q.combineNodeFilters,q.iterateNode,q.iterateNodeToArray,q.getCommonAncestor,q.parentsAndSelf,q.selectIncludeSelf,q.selectClosestRelative,q.createNodeIterator,q.createTreeWalker,q.bind,q.bindUntil,q.dispatchDOMMouseEvent,q.removeNode),T=(q.getClass,q.setClass);q.getScrollOffset,q.getScrollParent,q.getContentRect,q.scrollBy,q.scrollIntoView,q.createRange,q.rangeIntersects,q.rangeEquals,q.rangeCovers,q.compareRangePosition,q.makeSelection,q.getRect,q.getRects,q.toPlainRect,q.rectEquals,q.rectCovers,q.rectIntersects,q.pointInRect,q.mergeRect,q.elementFromPoint;const k=a.dom;var D=a.dom;D.textInputAllowed,D.beginDrag,D.beginPinchZoom,D.getShortcut,D.setShortcut,D.focusable,D.focused,D.setModal,D.retainFocus,D.releaseFocus,D.focus;const z=k;t.addAsyncAction;var L=t.closeFlyout,U=t.openFlyout;function _(e){var t,n=document.createElement("div"),i=!1;function r(t){i||(i=!0,L(n,t).then((function(){i=!1,V(n),(e.onClose||f)(n),e.onRender&&s.unmountComponentAtNode(n)})))}return{root:n,close:r,open:function(){return t||(n.className=e.className||"",document.body.appendChild(n),z.retainFocus(z.activeElement,n),e.modal&&(n.setAttribute("is-modal",""),z.setModal(n)),e.onRender&&s.render(o.createElement(e.onRender,d({closeDialog:r},e)),n),t=U(n),j(t,(function(){t=null})),t.then(e.onCommit),(e.onOpen||f)(n),t)}}}function W(e){var t=(0,o.useState)(e)[0],n=(0,o.useState)((function(){return _(t)}))[0];return d(t,e),(0,o.useEffect)((function(){var e=F(z.root,n.root);m(e,t.isOpen)&&(e?n.close():n.open())}),[t.isOpen]),(0,o.useEffect)((function(){return n.close}),[n]),s.createPortal(e.children,n.root)}const G=t.defaults;var B;function H(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return(0,o.useEffect)((function(){B.ready.then((function(){n(!0)}))}),[]),t}function Z(e,t){var n=(0,o.useState)(B.route[e]),i=n[0],r=n[1];return(0,o.useEffect)((function(){var t=B.route[e];return r(t),B.route.watch(e,r)}),[e,t]),i||void 0===t||B.navigate(B.route.getPath(d({},B.route,w(e,t))),!0),i||""}i("react",(function(e){B=e})),G.react=!0;var $=u(103),J=u(43),K=Object.create(null);function Q(){return(0,$.useObservableProperty)(B,"language")}function X(e,t){var n=new RegExp("^("+Object.keys(e[t]).join("|")+")\\."),i={};function r(n,i,r){var o=((e[B.language]||K)[n]||K)[i]||((e[t]||K)[n]||K)[i]||"";return o&&void 0!==r?J(o,r):o}function o(e){return d(e,{html:function(t,n){return{__html:e(t,n)}}})}function s(e,t){var i=n.test(e)?RegExp.$1:"";return r(i,i?e.slice(RegExp.lastMatch.length):e,t)||e}return{translate:o(s),useTranslation:function(){var e=p(arguments),t=Q(),n=s;if(e[0]){var a=e.join(" ");n=i[a]||(i[a]=o((function(t,n){return v(e,(function(e){return r(e,t,n)}))||t})))}return{language:t,t:n}}}}function Y(e){ee.call(this),this.attributes=e||{}}function ee(){}function te(e){this.mixin=e}function ne(){ee.call(this),this.states={},this.prefix="",this.counter=0}O(Y,ee,{getCustomAttributes:function(){return d({},this.attributes)}}),O(ee,{next:function(){},getRef:function(){return f},getClassNames:function(){return[]},getCustomAttributes:function(){return{}}}),P(ee.prototype),N(ee,{get scrollableTarget(){return new Y({"scrollable-target":""})},use:function(){var e=p(arguments),t=e[0],n={},i=e.filter((function(e){return e instanceof ee})),r=i.map((function(e){return e.getRef()}));return!t||t instanceof ee?t||e.shift():("function"!=typeof t?r.push((function(e){t.current=e})):r.push(t),e.shift()),h(i,(function(e,t){d(n,t.getCustomAttributes())})),d(n,{ref:C(r),className:$.classNames.apply(null,e)}),h(i,(function(e,t){t.next()})),n}}),O(te,{getMixin:function(){return this.mixin}}),O(ne,ee,{get ref(){var e=this.state;return this.next(),e.ref||(e.ref=new te(this.clone()))},get state(){var e=this,t=e.prefix+e.counter;return e.states[t]||(e.states[t]=e.initState())},reset:function(){return this.counter=0,this},next:function(){return this.counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n&&n!==t.element&&(t.element=n,e.initElement(n,t))}},elements:function(){return A(this.states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){return R(Object.getPrototypeOf(this),{states:this.states,prefix:I()+".",counter:0})}});var ie=ne.prototype;function re(e){ne.call(this),this.classNames=e||[]}O(re,ne,{getClassNames:function(){return[this.state.classNames]},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;z.watchAttributes(e,["class"],(function(i){if(i.includes(e)){var r=d({},t.classNames);h(n.classNames,(function(n,i){t.classNames[i]=e.classList.contains(i)})),x(r,t.classNames)||n.onClassNameUpdated(e,r,t.classNames)}}))},clone:function(){return d(ie.clone.call(this),{classNames:this.classNames})},onClassNameUpdated:function(e,t,n){}});var oe=re.prototype;function se(){re.call(this,["tweening-in","tweening-out"])}O(se,re,{next:function(){return this.effects=void 0,this.trigger=void 0,oe.next.call(this)},with:function(e){return this.effects=e.effects,this.trigger=e.trigger,this},withEffects:function(){return this.effects=p(arguments),this},getCustomAttributes:function(){return d({},oe.getCustomAttributes.call(this),{"animate-in":(this.effects||[]).join(" "),"animate-on":this.trigger||"show"})}});var ae=re.prototype;function ue(e){re.call(this,["tweening-in","tweening-out"]),this.className=e}O(ue,re,{getClassNames:function(){return[this.className].concat(ae.getClassNames.call(this))}});var ce=se.prototype,le=0;function fe(){se.call(this),this.className="brew-anim-"+ ++le,this.item=new ue(this.className)}O(fe,se,{reset:function(){return this.item.reset(),ce.reset.call(this)},getCustomAttributes:function(){return d({},ce.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return d(ce.clone.call(this),{item:this.item.ref.getMixin()})}});var me=re.prototype,pe=0;function de(){re.call(this,["open","closing","tweening-in","tweening-out"]),this.isFlyoutOpened=!1,this.animating=!1,this.visible=!1,this.toggle=new re(["target-opened"])}O(de,re,{reset:function(){return this.toggle.reset(),me.reset.call(this)},next:function(){return this.effects=void 0,me.next.call(this)},withEffects:function(){return this.effects=p(arguments),this},getCustomAttributes:function(){return d({},me.getCustomAttributes.call(this),{"is-flyout":""},this.effects&&{"animate-on":"open","animate-in":this.effects.join(" "),"animate-out":""})},onOpen:function(e){return this.onToggleState((function(t){if(t)return e()}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;me.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++pe),B.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){h(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=d(me.clone.call(this),{toggle:this.toggle.ref.getMixin()});return M(e,"isFlyoutOpened",this),e},onClassNameUpdated:function(e,t,n){var i,r=this,o=function(e){return t[e]!==n[e]&&n[e]};o("open")?(r.isFlyoutOpened=!0,r.visible=!0):o("closing")||o("tweening-out")?r.isFlyoutOpened=!1:t[i="open"]===n[i]||n[i]||(r.visible=!1)}});var he=re.prototype;function ge(){re.call(this,["focused"])}O(ge,re,{initElement:function(e,t){he.initElement.call(this,e,t),z.on(e,{focusin:function(){T(e,"focused",!0)},focusout:function(){T(e,"focused",!1)}})}});var ve=re.prototype;function we(){re.call(this,["loading"])}O(we,re,{initElement:function(e,t){ve.initElement.call(this,e,t),z.on(e,{asyncStart:function(){T(e,"loading",!0)},asyncEnd:function(){T(e,"loading",!1)},cancelled:function(){T(e,"loading",!1)}})}});var be=re.prototype;function ye(){re.call(this,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),this.target=ee.scrollableTarget,this.pageIndex=0}function xe(e){return(0,o.useState)((function(){return new ye}))[0].reset().withOptions(e)}function Ce(){return(0,o.useState)((function(){return new de}))[0].reset()}function Se(){return(0,o.useState)((function(){return new se}))[0].reset()}function Ee(){return(0,o.useState)((function(){return new fe}))[0].reset()}function Ae(){return(0,o.useState)((function(){return new ge}))[0].reset()}function Ne(){return(0,o.useState)((function(){return new we}))[0].reset()}function Oe(e){return e.getMixin().reset()}O(ye,re,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return d({},be.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;B.on(e,"statechange",(function(e){"pageIndex"in e.newValues&&d(n,{pageIndex:e.newValues.pageIndex})}),!0)},clone:function(){var e=be.clone.call(this);return M(e,"pageIndex",this),e}});var Me=t.animateIn,Pe=t.animateOut,Re=(t.addAnimateIn,t.addAnimateOut,new Map);function Ie(){var e=this;o.Component.apply(e,arguments),e.mounted=!1,e.componentWillUnmount=B.on("navigate",(function(){e.mounted&&e.getViewComponent()&&e.forceUpdate()}))}function je(e,t){var n=function(t){var n=y(t,["rootProps","onComponentLoaded"]),i=(0,$.useAsync)(e)[0];return o.createElement("div",d({},t.rootProps,{ref:function(e){e&&i&&(t.onComponentLoaded||f)(e)},children:i&&o.createElement(i.default,n)}))};return Re.set(n,t),n}function qe(){var e,t=p(arguments);return t[0]&&"function"!=typeof t[0]&&(e=t.shift()),o.createElement(Ie,d({},e,{views:t}))}function Fe(e,t){return B.route.getPath(d({},B.route,t,Re.get(e)))}O(Ie,o.Component,{componentDidMount:function(){this.mounted=!0},render:function(){var e=this,t=e.getViewComponent();return t&&t!==e.currentViewComponent&&(e.currentViewComponent=t,e.currentView&&e.currentElement&&(e.prevView=e.currentView,e.prevElement=e.currentElement,e.currentElement=void 0,Pe(e.prevElement,"show").then((function(){e.prevElement=void 0,e.prevView=void 0,e.forceUpdate()}))),e.currentView=o.createElement(t,{key:B.route.view,rootProps:y(e.props,["views"]),onComponentLoaded:function(t){e.currentElement=t,S((function(){return Me(t,"show")}))}})),o.createElement(o.Fragment,null,e.prevView,e.currentView)},getViewComponent:function(){var e=this.props.views;return g(e,(function(e){var t=Re.get(e);return t&&x(t,b(B.route,E(t)))}))||void B.navigate(Fe(e[0]),!0)}});const Ve=r,Te=e})(),c=c.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map