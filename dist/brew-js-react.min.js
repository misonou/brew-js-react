!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe"),require("jQuery")):"function"==typeof define&&define.amd?define("brew-js-react",["brew-js","react","react-dom","zeta-dom","zeta-dom-react","waterpipe","jQuery"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe"),require("jQuery")):e["brew-js-react"]=t(e.brew,e.React,e.ReactDOM,e.zeta,e["zeta-dom-react"],e.waterpipe,e.jQuery)}(self,(function(e,t,n,r,i,o,a){return(()=>{var s={145:e=>{"use strict";e.exports=a},28:e=>{"use strict";e.exports=o},103:e=>{"use strict";e.exports=i},80:t=>{"use strict";t.exports=e},359:e=>{"use strict";e.exports=t},318:e=>{"use strict";e.exports=n},654:e=>{"use strict";e.exports=r},346:(e,t,n)=>{var r=window.jQuery||n(145);e.exports=r},43:(e,t,n)=>{var r=window.waterpipe||n(28);e.exports=r}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={exports:{}};return s[e](n,n.exports,c),n.exports}c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";c.d(l,{default:()=>dt});var e={};c.r(e),c.d(e,{AnimateMixin:()=>Ve,AnimateSequenceItemMixin:()=>qe,AnimateSequenceMixin:()=>ke,ClassNameMixin:()=>Re,Dialog:()=>G,ErrorHandlerMixin:()=>Qe,FlyoutMixin:()=>Ge,FlyoutToggleMixin:()=>_e,FocusStateMixin:()=>$e,LoadingStateMixin:()=>Ke,Mixin:()=>Me,ScrollableMixin:()=>et,StatefulMixin:()=>Pe,ViewStateContainer:()=>he,createDialog:()=>H,default:()=>mt,isViewMatched:()=>oe,linkTo:()=>ue,makeTranslation:()=>Ee,navigateTo:()=>ce,redirectTo:()=>le,registerView:()=>ae,renderView:()=>se,useAnimateMixin:()=>rt,useAnimateSequenceMixin:()=>it,useAppReady:()=>de,useErrorHandlerMixin:()=>ot,useFlyoutMixin:()=>at,useFocusStateMixin:()=>st,useLanguage:()=>Ce,useLoadingStateMixin:()=>ut,useMixin:()=>lt,useMixinRef:()=>ft,useRouteParam:()=>pe,useRouteState:()=>ge,useScrollableMixin:()=>ct,useViewContainerState:()=>ie});var t=c(80);const n=t;var r=t.install;t.addExtension,t.addDetect;const i=n;var o=c(359),a=c(318),s=c(654),u=s.util,f=u.noop,m=u.either,d=u.is,p=(u.isUndefinedOrNull,u.isArray,u.isFunction),g=(u.isThenable,u.isPlainObject,u.isArrayLike,u.makeArray),h=u.extend,v=u.each,y=(u.map,u.grep,u.splice,u.any),w=u.single,x=u.kv,b=u.pick,C=(u.exclude,u.mapGet,u.mapRemove,u.arrRemove,u.setAdd,u.equal),E=u.combineFn,S=(u.executeOnce,u.createPrivateStore),M=(u.setTimeout,u.setTimeoutOnce,u.setInterval,u.setIntervalSafe,u.setImmediate),A=(u.setImmediateOnce,u.throwNotFunction,u.errorWithCode,u.keys),O=u.values,P=(u.hasOwnProperty,u.getOwnPropertyDescriptors,u.define),N=u.definePrototype,j=(u.defineOwnProperty,u.defineGetterProperty),R=u.defineHiddenProperty,I=u.defineAliasProperty,V=(u.defineObservableProperty,u.watch,u.watchOnce,u.watchable),T=u.inherit,q=(u.deepFreeze,u.iequal,u.randomId),F=(u.repeat,u.camel,u.hyphenate,u.ucfirst,u.lcfirst,u.trim,u.matchWord,u.htmlDecode,u.resolve,u.reject,u.always),D=(u.resolveAll,u.catchAsync,u.setPromiseTimeout,s.util),k=(D.domReady,D.tagName,D.isVisible,D.matchSelector,D.comparePosition,D.connected,D.containsOrEquals),z=(D.acceptNode,D.combineNodeFilters,D.iterateNode,D.iterateNodeToArray,D.getCommonAncestor,D.parentsAndSelf,D.selectIncludeSelf,D.selectClosestRelative,D.createNodeIterator,D.createTreeWalker,D.bind,D.bindUntil,D.dispatchDOMMouseEvent,D.removeNode),L=(D.getClass,D.setClass);D.getScrollOffset,D.getScrollParent,D.getContentRect,D.scrollBy,D.scrollIntoView,D.makeSelection,D.getRect,D.getRects,D.toPlainRect,D.rectEquals,D.rectCovers,D.rectIntersects,D.pointInRect,D.mergeRect,D.elementFromPoint;const U=s.dom;var Q=s.dom;Q.textInputAllowed,Q.beginDrag,Q.beginPinchZoom,Q.getShortcut,Q.setShortcut,Q.focusable,Q.focused,Q.setModal,Q.releaseModal,Q.retainFocus,Q.releaseFocus,Q.iterateFocusPath,Q.focus;const W=U;t.addAsyncAction;var _=t.closeFlyout,B=t.openFlyout;function H(e){var t,n=document.createElement("div"),r=!1;function i(t){r||(r=!0,_(n,t).then((function(){r=!1,z(n),(e.onClose||f)(n),e.onRender&&a.unmountComponentAtNode(n)})))}return{root:n,close:i,open:function(){return t||(n.className=e.className||"",document.body.appendChild(n),W.retainFocus(W.activeElement,n),e.modal&&(n.setAttribute("is-modal",""),W.setModal(n)),e.onRender&&a.render(o.createElement(e.onRender,h({closeDialog:i},e)),n),t=B(n),F(t,(function(){t=null})),t.then(e.onCommit),(e.onOpen||f)(n),t)}}}function G(e){var t=(0,o.useState)(e)[0],n=(0,o.useState)((function(){return H(t)}))[0];return h(t,e),(0,o.useEffect)((function(){var e=k(W.root,n.root);m(e,t.isOpen)&&(e?n.close():n.open())}),[t.isOpen]),(0,o.useEffect)((function(){return n.close}),[n]),a.createPortal(e.children,n.root)}var Z=c(103);const $=t.defaults;var J;r("react",(function(e){J=e})),$.react=!0;var K,X=t.animateIn,Y=t.animateOut,ee=(t.addAnimateIn,t.addAnimateOut,new Map),te={},ne=o.createContext(Object.freeze({active:!0}));function re(){var e=this;o.Component.apply(e,arguments),e.mounted=!1,K||(K=history.state,J.on("navigate",(function(){K=history.state}))),e.componentWillUnmount=J.on("navigate",(function(){e.mounted&&e.getViewComponent()&&e.forceUpdate()}))}function ie(){return o.useContext(ne)}function oe(e){var t=ee.get(e);return!!t&&!1===y(t.matchers,(function(e,t){var n=J.route[t]||"";return p(e)?!e(n):(e||"")!==n}))}function ae(e,t){var n=function(t){var n=(0,Z.useAsync)(e)[0];return o.createElement("div",h({},t.rootProps,{ref:function(e){e&&n&&(t.onComponentLoaded||f)(e)},children:n&&o.createElement(n.default)}))};return t=h({},t),v(t,(function(e,n){te[e]=!0,n instanceof RegExp&&(t[e]=n.test.bind(n))})),ee.set(n,{id:q(),matchCount:A(t).length,matchers:t,params:b(t,(function(e){return"string"==typeof e}))}),n}function se(){var e=g(arguments),t=p(e[0])?{}:e.shift(),n=e[0];return e.sort((function(e,t){return(ee.get(t)||{}).matchCount-(ee.get(e)||{}).matchCount})),o.createElement(re,{rootProps:t,views:e,defaultView:n})}function ue(e,t){var n=(ee.get(e)||{}).params,r={};for(var i in J.route)n&&i in n?r[i]=n[i]:t&&i in t?r[i]=t[i]:te[i]||(r[i]=J.route[i]);return J.route.getPath(r)}function ce(e,t){return J.navigate(ue(e,t))}function le(e,t){return J.navigate(ue(e,t),!0)}N(re,o.Component,{componentDidMount:function(){this.mounted=!0},componentDidCatch:function(e){W.emit("error",this.parentElement||W.root,{error:e},!0)},render:function(){var e=this,t=e.getViewComponent();if(t&&t!==e.currentViewComponent){e.currentViewComponent=t,e.currentView&&e.currentElement&&(e.prevView=e.currentView,e.prevElement=e.currentElement,e.currentElement=void 0,Y(e.prevElement,"show").then((function(){e.prevElement=void 0,e.prevView=void 0,e.forceUpdate()})));var n={key:ee.get(t).id,value:{}},r=o.createElement(ne.Provider,n,o.createElement(he,null,o.createElement(t,{rootProps:e.props.rootProps,onComponentLoaded:function(t){e.currentElement=t,e.parentElement=t.parentElement,M((function(){return X(t,"show")}))}})));j(n.value,"active",(function(){return e.currentView===r})),e.currentView=r}return o.createElement(o.Fragment,null,e.prevView,e.currentView)},getViewComponent:function(){var e=this.props;return y(e.views,oe)||history.state===K&&void le(e.defaultView)}});var fe={};function me(){return fe[history.state]||(fe[history.state]={})}function de(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return(0,o.useEffect)((function(){J.ready.then((function(){n(!0)}))}),[]),t}function pe(e,t){var n=ie(),r=J.route,i=(0,o.useState)(r[e]),a=i[0],s=i[1];return(0,o.useEffect)((function(){var t=r[e];if(s(t),e in r)return r.watch(e,(function(e){M((function(){n.active&&s(e)}))}));console.error("Route parameter "+e+" does not exist")}),[e,t]),a||void 0===t||J.navigate(r.getPath(h({},r,x(e,t))),!0),a||""}function ge(e,t){var n=ie(),r=me(),i=(0,o.useState)(e in r?r[e]:t);return n.active&&(r[e]=i[0]),i}function he(e){var t=ie(),n=(0,o.useState)((function(){var e={};return{getState:function(n,r){var i=me(),o=e[n]||(e[n]={value:i[r]&&i[r].value,get:function(){return o.value},set:function(e){o.value=e}});return t.active&&(i[r]=o),o}}}))[0];return(0,o.createElement)(Z.ViewStateProvider,{value:n},e.children)}var ve=c(43),ye=Object.create(null),we="function"==typeof Symbol&&Symbol.toPrimitive;function xe(e){this.toString=e}function be(e){return h((function(t,n){return e(t,n,!0)}),{html:function(t,n){return{__html:e(t,n)}},lazy:function(t,n){return new xe(e.bind(0,t,n,!0))}})}function Ce(){return(0,Z.useObservableProperty)(J,"language")}function Ee(e,t){var n=new RegExp("^("+Object.keys(e[t]).join("|")+")\\."),r={};function i(n,r,i,o){var a=((e[J.language]||ye)[n]||ye)[r]||((e[t]||ye)[n]||ye)[r]||"";return!a||o&&void 0===i?a:ve(a,i,{noEncode:o})}function o(){var e=g(arguments),t=e.join(" ");return r[t]||(r[t]=be((function(t,n,r){return w(e,(function(e){return i(e,t,n,r)}))||t})))}return r[""]=be((function(e,t,r){var o=n.test(e)?RegExp.$1:"";return i(o,o?e.slice(RegExp.lastMatch.length):e,t,r)||e})),{translate:r[""],getTranslation:o,useTranslation:function(){var e=Ce(),t=o.apply(0,arguments);return{language:e,t}}}}function Se(e){Me.call(this),this.attributes=e||{}}function Me(){}we&&(xe.prototype[we]=function(){return this.toString()}),N(Se,Me,{getCustomAttributes:function(){return h({},this.attributes)}}),N(Me,{next:function(){},getRef:function(){return f},getClassNames:function(){return[]},getCustomAttributes:function(){return{}}}),V(Me.prototype),P(Me,{get scrollableTarget(){return new Se({"scrollable-target":""})},use:function(){var e=g(arguments),t=e[0],n={},r=e.filter((function(e){return e instanceof Me})),i=r.map((function(e){return e.getRef()}));return!t||t instanceof Me?t||e.shift():("function"!=typeof t?i.push((function(e){t.current=e})):i.push(t),e.shift()),v(r,(function(e,t){h(n,t.getCustomAttributes())})),h(n,{ref:E(i),className:Z.classNames.apply(null,e)}),v(r,(function(e,t){t.next()})),n}});var Ae=S();function Oe(e){this.mixin=e}function Pe(){Me.call(this),Ae(this,{states:{},prefix:"",counter:0})}N(Oe,{getMixin:function(){return this.mixin}}),N(Pe,Me,{get ref(){var e=this,t=e.state;return e.next(),t.ref||(t.ref=new Oe(e.clone()))},get state(){var e=Ae(this),t=e.prefix+e.counter;return e.states[t]||(e.states[t]=this.initState())},reset:function(){return Ae(this).counter=0,this},next:function(){return Ae(this).counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n&&n!==t.element&&(t.element=n,e.initElement(n,t))}},elements:function(){return O(Ae(this).states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){var e=T(Object.getPrototypeOf(this));return Ae(e,{states:Ae(this).states,prefix:q()+".",counter:0}),e}});var Ne=Pe.prototype;function je(e,t,n,r){var i=n.classNames,o=h({},i);if(v(e.classNames,(function(e,n){i[n]=t.classList.contains(n)})),!C(o,i)){var a=e.onClassNameUpdated.bind(e,t,o,h({},i));r?setImmediate(a):a()}}function Re(e){Pe.call(this),this.classNames=e||[]}N(Re,Pe,{getClassNames:function(){return[this.state.classNames]},getRef:function(){var e=this,t=e.state.element;return t&&k(root,t)&&je(e,t,e.state,!0),Ne.getRef.call(this)},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;W.watchAttributes(e,["class"],(function(r){r.includes(e)&&je(n,e,t)}))},clone:function(){return h(Ne.clone.call(this),{classNames:this.classNames})},onClassNameUpdated:function(e,t,n){}});var Ie=Re.prototype;function Ve(){Re.call(this,["tweening-in","tweening-out"])}N(Ve,Re,{next:function(){var e=this;return e.effects=void 0,e.trigger=void 0,Ie.next.call(e)},with:function(e){var t=this;return t.effects=e.effects,t.trigger=e.trigger,t},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return h({},Ie.getCustomAttributes.call(e),{"animate-in":(e.effects||[]).join(" "),"animate-on":e.trigger||"show"})}});var Te=Re.prototype;function qe(e){Re.call(this,["tweening-in","tweening-out"]),this.className=e}N(qe,Re,{getClassNames:function(){return[this.className].concat(Te.getClassNames.call(this))}});var Fe=Ve.prototype,De=0;function ke(){var e=this;Ve.call(e),e.className="brew-anim-"+ ++De,e.item=new qe(e.className)}N(ke,Ve,{reset:function(){return this.item.reset(),Fe.reset.call(this)},getCustomAttributes:function(){return h({},Fe.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return h(Fe.clone.call(this),{item:this.item.ref.getMixin()})}});var ze=s.EventContainer,Le=Pe.prototype,Ue=new ze;function Qe(){Pe.call(this)}N(Qe,Pe,{catch:function(e,t){return t||(t=e,e=null),Ue.add(this,e?"error":"default",(function(n){if(!e||function(e,t){return p(e)?d(t,e):t&&t.code===e}(e,n.error))return t(n.error)}))},initElement:function(e,t){var n=this;Le.initElement.call(n,e,t),W.on(e,"error",(function(e){var t={error:e.error};return Ue.emit("error",n,t)||Ue.emit("default",n,t)}))}});var We=Re.prototype;function _e(e){Re.call(this,["target-opened"]),this.flyoutMixin=e}N(_e,Re,{getCustomAttributes:function(){var e=this.flyoutMixin.elements()[0];return h({},We.getCustomAttributes.call(this),{toggle:e&&"#"+e.id})},clone:function(){return h(We.clone.call(this),{flyoutMixin:this.flyoutMixin})}});var Be=Re.prototype,He=0;function Ge(){var e=this;Re.call(e,["open","closing","tweening-in","tweening-out"]),e.modal=!1,e.isFlyoutOpened=!1,e.animating=!1,e.visible=!1,e.toggle=new _e(e)}N(Ge,Re,{reset:function(){return this.toggle.reset(),Be.reset.call(this)},next:function(){return this.effects=void 0,Be.next.call(this)},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return h({},Be.getCustomAttributes.call(e),{"is-flyout":"","swipe-dismiss":e.swipeToDismiss},e.modal&&{"is-modal":""},e.effects&&{"animate-on":"open","animate-in":e.effects.join(" "),"animate-out":""})},onOpen:function(e){return this.onToggleState((function(t){if(t)return e()}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;Be.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++He),J.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){v(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=this,t=h(Be.clone.call(e),{toggle:e.toggle.ref.getMixin()});return I(t,"isFlyoutOpened",e),I(t,"modal",e),t},onClassNameUpdated:function(e,t,n){this.visible=n.open,this.isFlyoutOpened=n.open&&!n.closing&&!n["tweening-out"]}});var Ze=Pe.prototype;function $e(){Pe.call(this)}N($e,Pe,{initElement:function(e,t){Ze.initElement.call(this,e,t),W.on(e,{focusin:function(){t.focused=!0,L(e,"focused",!0)},focusout:function(){t.focused=!1,L(e,"focused",!1)}})},getClassNames:function(){return[{focused:!!this.state.focused}]}});var Je=Pe.prototype;function Ke(){Pe.call(this)}N(Ke,Pe,{initElement:function(e,t){Je.initElement.call(this,e,t),W.on(e,{asyncStart:function(){t.loading=!0,L(e,"loading",!0)},asyncEnd:function(){t.loading=!1,L(e,"loading",!1)},cancelled:function(){t.loading=!1,L(e,"loading",!1)}})},getClassNames:function(){return[{loading:!!this.state.loading}]}});var Xe=c(346),Ye=Re.prototype;function et(){var e=this;Re.call(e,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),e.target=Me.scrollableTarget,e.pageIndex=0,e.scrolling=!1}function tt(e){h(this,e)}function nt(e){return function(){var t=lt(e);return(t.withOptions||tt).apply(t,arguments),t}}N(et,Re,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return h({},Ye.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;J.on(e,{statechange:function(e){"pageIndex"in e.newValues&&h(n,{pageIndex:e.newValues.pageIndex})},scrollStart:function(){n.scrolling=!0},scrollStop:function(){n.scrolling=!1}},!0)},clone:function(){var e=Ye.clone.call(this);return I(e,"pageIndex",this),e}}),v("destroy enable disable setOptions refresh scrollPadding stop scrollLeft scrollTop scrollBy scrollTo scrollByPage scrollToPage scrollToElement",(function(e,t){R(et.prototype,t,(function(){var e=Xe(this.elements());return e.scrollable.apply(e,[t].concat(g(arguments)))}))}));var rt=nt(Ve),it=nt(ke),ot=nt(Qe),at=nt(Ge),st=nt($e),ut=nt(Ke),ct=nt(et);function lt(e){return(0,o.useState)((function(){return new e}))[0].reset()}function ft(e){return e&&e.getMixin().reset()}const mt=i,dt=e})(),l=l.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map