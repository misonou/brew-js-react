!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("brew-js"),require("zeta-dom"),require("zeta-dom-react")):"function"==typeof define&&define.amd?define("brew-js-react",["react","react-dom","brew-js","zeta-dom","zeta-dom-react"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("react"),require("react-dom"),require("brew-js"),require("zeta-dom"),require("zeta-dom-react")):e["brew-js-react"]=t(e.React,e.ReactDOM,e.brew,e.zeta,e["zeta-dom-react"])}(self,(function(e,t,n,i,r){return(()=>{"use strict";var o={103:e=>{e.exports=r},80:e=>{e.exports=n},359:t=>{t.exports=e},318:e=>{e.exports=t},654:e=>{e.exports=i}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return o[e](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{a.d(u,{default:()=>Se});var e={};a.r(e),a.d(e,{AnimateMixin:()=>Q,AnimateSequenceItemMixin:()=>Y,AnimateSequenceMixin:()=>te,ClassNameMixin:()=>J,Dialog:()=>k,FlyoutMixin:()=>re,FocusStateMixin:()=>se,LoadingStateMixin:()=>ue,Mixin:()=>_,ScrollableMixin:()=>le,StatefulMixin:()=>H,createDialog:()=>T,linkTo:()=>Ce,registerView:()=>ye,renderView:()=>xe,useAnimateMixin:()=>de,useAnimateSequenceMixin:()=>pe,useAppReady:()=>L,useFlyoutMixin:()=>me,useFocusStateMixin:()=>he,useLanguage:()=>U,useLoadingStateMixin:()=>ge,useMixinRef:()=>ve,useRouteParam:()=>W,useScrollableMixin:()=>fe});var t=a(359),n=a(318),i=a(80),r=a(654),o=r.util,s=o.noop,c=o.either,l=(o.is,o.isUndefinedOrNull,o.isArray,o.isFunction,o.isThenable,o.isPlainObject,o.isArrayLike,o.makeArray),f=o.extend,m=o.each,d=(o.map,o.grep,o.splice,o.any),p=(o.single,o.kv),h=o.pick,g=o.exclude,v=(o.mapGet,o.mapRemove,o.arrRemove,o.setAdd,o.equal),b=o.combineFn,w=(o.executeOnce,o.createPrivateStore,o.setTimeoutOnce,o.setImmediate),y=(o.setImmediateOnce,o.throwNotFunction,o.keys),x=o.values,C=(o.hasOwnProperty,o.getOwnPropertyDescriptors,o.define),S=o.definePrototype,E=(o.defineOwnProperty,o.defineGetterProperty,o.defineHiddenProperty,o.defineAliasProperty),N=(o.defineObservableProperty,o.watch,o.watchOnce,o.watchable),A=o.inherit,O=(o.deepFreeze,o.iequal,o.randomId),M=(o.repeat,o.camel,o.hyphenate,o.ucfirst,o.lcfirst,o.trim,o.matchWord,o.htmlDecode,o.resolve,o.reject,o.always),P=(o.resolveAll,o.catchAsync,o.setPromiseTimeout,r.util),F=(P.domReady,P.tagName,P.is,P.isVisible,P.matchSelector,P.comparePosition,P.connected,P.containsOrEquals),I=(P.acceptNode,P.combineNodeFilters,P.iterateNode,P.iterateNodeToArray,P.getCommonAncestor,P.parentsAndSelf,P.selectIncludeSelf,P.selectClosestRelative,P.createNodeIterator,P.createTreeWalker,P.bind,P.bindUntil,P.dispatchDOMMouseEvent,P.removeNode),R=(P.getClass,P.setClass);P.getScrollOffset,P.getScrollParent,P.getContentRect,P.scrollBy,P.scrollIntoView,P.createRange,P.rangeIntersects,P.rangeEquals,P.rangeCovers,P.compareRangePosition,P.makeSelection,P.getRect,P.getRects,P.toPlainRect,P.rectEquals,P.rectCovers,P.rectIntersects,P.pointInRect,P.mergeRect,P.elementFromPoint;const j=r.dom;var q=r.dom;q.textInputAllowed,q.beginDrag,q.beginPinchZoom,q.getShortcut,q.setShortcut,q.focusable,q.focused,q.setModal,q.retainFocus,q.releaseFocus,q.focus;const V=j;function T(e){var r,o=document.createElement("div"),a=!1,u=s;function c(){var n=(0,t.useState)(0)[1];return u=function(){n((function(e){return++e}))},e.onRender(f({root:o,closeDialog:l},e))}function l(t){a||(a=!0,i.closeFlyout(o,t).then((function(){a=!1,I(o),n.unmountComponentAtNode(o),(e.onClose||s)(o)})))}return{root:o,refresh:u,close:l,open:function(){return r||(o.className=e.className,e.modal&&o.setAttribute("is-modal",""),document.body.appendChild(o),e.modal&&V.setModal(o),V.retainFocus(V.activeElement,o),n.render(t.createElement(c),o),r=i.openFlyout(o),M(r,(function(){r=null})),r.then(e.onCommit),(e.onOpen||s)(o),r)}}}function k(e){var n=(0,t.useState)({open:!1})[0];f(n,e),e.children&&(n.onRender=function(){return t.createElement(t.Fragment,null,e.children)});var i=(0,t.useState)((function(){return T(n)}))[0];return(0,t.useEffect)((function(){var e=F(V.root,i.root);c(e,n.open)&&(e?i.close():i.open())}),[n.open]),(0,t.useEffect)((function(){return i.close}),[i]),(0,t.useEffect)((function(){i.refresh()})),t.createElement(t.Fragment)}var z,D=a(103);function L(){var e=(0,t.useState)(!1),n=e[0],i=e[1];return(0,t.useEffect)((function(){z.ready.then((function(){i(!0)}))}),[]),n}function U(){return(0,D.useObservableProperty)(z,"language")}function W(e,n){var i=(0,t.useState)(z.route[e]),r=i[0],o=i[1];return(0,t.useEffect)((function(){var t=z.route[e];return o(t),z.route.watch(e,o)}),[e,n]),r||void 0===n||z.navigate(z.route.getPath(f({},z.route,p(e,n))),!0),r||""}function G(e){_.call(this),this.attributes=e||{}}function _(){}function B(e){this.mixin=e}function H(){_.call(this),this.states={},this.prefix="",this.counter=0}i.install("react",(function(e){z=e})),i.defaults.react=!0,S(G,_,{getCustomAttributes:function(){return f({},this.attributes)}}),S(_,{next:function(){},getRef:function(){return s},getClassNames:function(){return[]},getCustomAttributes:function(){return{}}}),N(_.prototype),C(_,{get scrollableTarget(){return new G({"scrollable-target":""})},use:function(){var e=l(arguments),t=e[0],n={},i=e.filter((function(e){return e instanceof _})),r=i.map((function(e){return e.getRef()}));return!t||t instanceof _?t||e.shift():("function"!=typeof t?r.push((function(e){t.current=e})):r.push(t),e.shift()),m(i,(function(e,t){f(n,t.getCustomAttributes())})),f(n,{ref:b(r),className:D.classNames.apply(null,e)}),m(i,(function(e,t){t.next()})),n}}),S(B,{getMixin:function(){return this.mixin}}),S(H,_,{get ref(){var e=this.state;return this.next(),e.ref||(e.ref=new B(this.clone()))},get state(){var e=this,t=e.prefix+e.counter;return e.states[t]||(e.states[t]=e.initState())},reset:function(){return this.counter=0,this},next:function(){return this.counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n!==t.element&&(t.element=n,n&&e.initElement(n,t))}},elements:function(){return x(this.states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){return A(Object.getPrototypeOf(this),{states:this.states,prefix:O()+".",counter:0})}});var Z=H.prototype;function J(e){H.call(this),this.classNames=e||[]}S(J,H,{getClassNames:function(){return[this.state.classNames]},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;V.watchAttributes(e,["class"],(function(i){if(i.includes(e)){var r=f({},t.classNames);m(n.classNames,(function(n,i){t.classNames[i]=e.classList.contains(i)})),v(r,t.classNames)||n.onClassNameUpdated(e,r,t.classNames)}}))},clone:function(){return f(Z.clone.call(this),{classNames:this.classNames})},onClassNameUpdated:function(e,t,n){}});var K=J.prototype;function Q(){J.call(this,["tweening-in","tweening-out"])}S(Q,J,{next:function(){return this.effects=void 0,this.trigger=void 0,K.next.call(this)},with:function(e){return this.effects=e.effects,this.trigger=e.trigger,this},withEffects:function(){return this.effects=l(arguments),this},getCustomAttributes:function(){return f({},K.getCustomAttributes.call(this),{"animate-in":(this.effects||[]).join(" "),"animate-on":this.trigger||"show"})}});var X=J.prototype;function Y(e){J.call(this,["tweening-in","tweening-out"]),this.className=e}S(Y,J,{getClassNames:function(){return[this.className].concat(X.getClassNames.call(this))}});var $=Q.prototype,ee=0;function te(){Q.call(this),this.className="brew-anim-"+ ++ee,this.item=new Y(this.className)}S(te,Q,{reset:function(){return this.item.reset(),$.reset.call(this)},getCustomAttributes:function(){return f({},$.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return f($.clone.call(this),{item:this.item.ref.getMixin()})}});var ne=J.prototype,ie=0;function re(){J.call(this,["open","closing","tweening-in","tweening-out"]),this.isFlyoutOpened=!1,this.animating=!1,this.visible=!1,this.toggle=new J(["target-opened"])}S(re,J,{reset:function(){return this.toggle.reset(),ne.reset.call(this)},next:function(){return this.effects=void 0,ne.next.call(this)},withEffects:function(){return this.effects=l(arguments),this},getCustomAttributes:function(){return f({},ne.getCustomAttributes.call(this),{"is-flyout":""},this.effects&&{"animate-on":"open","animate-in":this.effects.join(" "),"animate-out":""})},onOpen:function(e){return this.onToggleState((function(t){if(t)return e()}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;ne.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++ie),z.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){m(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=f(ne.clone.call(this),{toggle:this.toggle.ref.getMixin()});return E(e,"isFlyoutOpened",this),e},onClassNameUpdated:function(e,t,n){var i,r=this,o=function(e){return t[e]!==n[e]&&n[e]};o("open")?(r.isFlyoutOpened=!0,r.visible=!0):o("closing")||o("tweening-out")?r.isFlyoutOpened=!1:t[i="open"]===n[i]||n[i]||(r.visible=!1)}});var oe=J.prototype;function se(){J.call(this,["focused"])}S(se,J,{initElement:function(e,t){oe.initElement.call(this,e,t),V.on(e,{focusin:function(){R(e,"focused",!0)},focusout:function(){R(e,"focused",!1)}})}});var ae=J.prototype;function ue(){J.call(this,["loading"])}S(ue,J,{initElement:function(e,t){ae.initElement.call(this,e,t),V.on(e,{asyncStart:function(){R(e,"loading",!0)},asyncEnd:function(){R(e,"loading",!1)},cancelled:function(){R(e,"loading",!1)}})}});var ce=J.prototype;function le(){J.call(this,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),this.target=_.scrollableTarget,this.pageIndex=0}function fe(e){return(0,t.useState)((function(){return new le}))[0].reset().withOptions(e)}function me(){return(0,t.useState)((function(){return new re}))[0].reset()}function de(){return(0,t.useState)((function(){return new Q}))[0].reset()}function pe(){return(0,t.useState)((function(){return new te}))[0].reset()}function he(){return(0,t.useState)((function(){return new se}))[0].reset()}function ge(){return(0,t.useState)((function(){return new ue}))[0].reset()}function ve(e){return e.getMixin().reset()}S(le,J,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return f({},ce.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;z.on(e,"statechange",(function(e){"pageIndex"in e.newValues&&f(n,{pageIndex:e.newValues.pageIndex})}),!0)},clone:function(){var e=ce.clone.call(this);return E(e,"pageIndex",this),e}});var be=new Map;function we(){var e=this;t.Component.apply(e,arguments),e.mounted=!1,e.componentWillUnmount=z.on("navigate",(function(){e.mounted&&e.getViewComponent()&&e.forceUpdate()}))}function ye(e,n){var i=function(n){var i=g(n,["rootProps","onComponentLoaded"]),r=(0,D.useAsyncContent)(e)[0];return t.createElement("div",f({},n.rootProps,{ref:function(e){e&&r&&(n.onComponentLoaded||s)(e)},children:r&&t.createElement(r.default,i)}))};return be.set(i,n),i}function xe(){var e,n=l(arguments);return n[0]&&"function"!=typeof n[0]&&(e=n.shift()),t.createElement(we,f({},e,{views:n}))}function Ce(e,t){return z.route.getPath(f({},z.route,t,be.get(e)))}S(we,t.Component,{componentDidMount:function(){this.mounted=!0},render:function(){var e=this,n=e.getViewComponent();return n&&n!==e.currentViewComponent&&(e.currentViewComponent=n,e.currentView&&e.currentElement&&(e.prevView=e.currentView,e.prevElement=e.currentElement,e.currentElement=void 0,i.animateOut(e.prevElement,"show").then((function(){e.prevElement=void 0,e.prevView=void 0,e.forceUpdate()}))),e.currentView=t.createElement(n,{key:z.route.view,rootProps:g(e.props,["views"]),onComponentLoaded:function(t){e.currentElement=t,w((function(){return i.animateIn(t,"show")}))}})),t.createElement(t.Fragment,null,e.prevView,e.currentView)},getViewComponent:function(){var e=this.props.views;return d(e,(function(e){var t=be.get(e);return t&&v(t,h(z.route,y(t)))}))||void z.navigate(Ce(e[0]),!0)}});const Se=e})(),u=u.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map