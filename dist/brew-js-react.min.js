!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):"function"==typeof define&&define.amd?define("brew-js-react",["brew-js","react","react-dom","zeta-dom","zeta-dom-react","waterpipe"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("brew-js"),require("react"),require("react-dom"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):e["brew-js-react"]=t(e.brew,e.React,e.ReactDOM,e.zeta,e["zeta-dom-react"],e.waterpipe)}(self,(function(e,t,n,r,i,o){return(()=>{var a={28:e=>{"use strict";e.exports=o},103:e=>{"use strict";e.exports=i},80:t=>{"use strict";t.exports=e},359:e=>{"use strict";e.exports=t},318:e=>{"use strict";e.exports=n},654:e=>{"use strict";e.exports=r},43:(e,t,n)=>{var r=window.waterpipe||n(28);e.exports=r}},s={};function u(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e](n,n.exports,u),n.exports}u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";u.d(c,{default:()=>nt});var e={};u.r(e),u.d(e,{AnimateMixin:()=>pe,AnimateSequenceItemMixin:()=>he,AnimateSequenceMixin:()=>we,ClassNameMixin:()=>me,Dialog:()=>B,ErrorHandlerMixin:()=>Ee,FlyoutMixin:()=>Ne,FocusStateMixin:()=>Pe,LoadingStateMixin:()=>Ie,Mixin:()=>ae,ScrollableMixin:()=>qe,StatefulMixin:()=>ce,createDialog:()=>G,default:()=>tt,isViewMatched:()=>Je,linkTo:()=>Xe,makeTranslation:()=>ie,navigateTo:()=>Ye,redirectTo:()=>et,registerView:()=>Ke,renderView:()=>Qe,useAnimateMixin:()=>Te,useAnimateSequenceMixin:()=>ke,useAppReady:()=>J,useErrorHandlerMixin:()=>De,useFlyoutMixin:()=>ze,useFocusStateMixin:()=>Le,useLanguage:()=>re,useLoadingStateMixin:()=>Ue,useMixin:()=>He,useMixinRef:()=>We,useRouteParam:()=>K,useScrollableMixin:()=>_e});var t=u(80);const n=t;var r=t.install;t.addExtension,t.addDetect;const i=n;var o=u(359),a=u(318),s=u(654),l=s.util,f=l.noop,m=l.either,d=l.is,p=(l.isUndefinedOrNull,l.isArray,l.isFunction),g=(l.isThenable,l.isPlainObject,l.isArrayLike,l.makeArray),h=l.extend,v=l.each,y=(l.map,l.grep,l.splice,l.any),w=l.single,b=l.kv,x=l.pick,C=l.exclude,E=(l.mapGet,l.mapRemove,l.arrRemove,l.setAdd,l.equal),M=l.combineFn,S=(l.executeOnce,l.createPrivateStore),A=(l.setTimeoutOnce,l.setImmediate),N=(l.setImmediateOnce,l.throwNotFunction,l.keys),O=l.values,P=(l.hasOwnProperty,l.getOwnPropertyDescriptors,l.define),R=l.definePrototype,I=(l.defineOwnProperty,l.defineGetterProperty,l.defineHiddenProperty,l.defineAliasProperty),j=(l.defineObservableProperty,l.watch,l.watchOnce,l.watchable),q=l.inherit,F=(l.deepFreeze,l.iequal,l.randomId),V=(l.repeat,l.camel,l.hyphenate,l.ucfirst,l.lcfirst,l.trim,l.matchWord,l.htmlDecode,l.resolve,l.reject,l.always),T=(l.resolveAll,l.catchAsync,l.setPromiseTimeout,s.util),k=(T.domReady,T.tagName,T.is,T.isVisible,T.matchSelector,T.comparePosition,T.connected,T.containsOrEquals),D=(T.acceptNode,T.combineNodeFilters,T.iterateNode,T.iterateNodeToArray,T.getCommonAncestor,T.parentsAndSelf,T.selectIncludeSelf,T.selectClosestRelative,T.createNodeIterator,T.createTreeWalker,T.bind,T.bindUntil,T.dispatchDOMMouseEvent,T.removeNode),z=(T.getClass,T.setClass);T.getScrollOffset,T.getScrollParent,T.getContentRect,T.scrollBy,T.scrollIntoView,T.createRange,T.rangeIntersects,T.rangeEquals,T.rangeCovers,T.compareRangePosition,T.makeSelection,T.getRect,T.getRects,T.toPlainRect,T.rectEquals,T.rectCovers,T.rectIntersects,T.pointInRect,T.mergeRect,T.elementFromPoint;const L=s.dom;var U=s.dom;U.textInputAllowed,U.beginDrag,U.beginPinchZoom,U.getShortcut,U.setShortcut,U.focusable,U.focused,U.setModal,U.releaseModal,U.retainFocus,U.releaseFocus,U.focus;const _=L;t.addAsyncAction;var H=t.closeFlyout,W=t.openFlyout;function G(e){var t,n=document.createElement("div"),r=!1;function i(t){r||(r=!0,H(n,t).then((function(){r=!1,D(n),(e.onClose||f)(n),e.onRender&&a.unmountComponentAtNode(n)})))}return{root:n,close:i,open:function(){return t||(n.className=e.className||"",document.body.appendChild(n),_.retainFocus(_.activeElement,n),e.modal&&(n.setAttribute("is-modal",""),_.setModal(n)),e.onRender&&a.render(o.createElement(e.onRender,h({closeDialog:i},e)),n),t=W(n),V(t,(function(){t=null})),t.then(e.onCommit),(e.onOpen||f)(n),t)}}}function B(e){var t=(0,o.useState)(e)[0],n=(0,o.useState)((function(){return G(t)}))[0];return h(t,e),(0,o.useEffect)((function(){var e=k(_.root,n.root);m(e,t.isOpen)&&(e?n.close():n.open())}),[t.isOpen]),(0,o.useEffect)((function(){return n.close}),[n]),a.createPortal(e.children,n.root)}const Z=t.defaults;var $;function J(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return(0,o.useEffect)((function(){$.ready.then((function(){n(!0)}))}),[]),t}function K(e,t){var n=(0,o.useState)($.route[e]),r=n[0],i=n[1];return(0,o.useEffect)((function(){var t=$.route[e];return i(t),$.route.watch(e,i)}),[e,t]),r||void 0===t||$.navigate($.route.getPath(h({},$.route,b(e,t))),!0),r||""}r("react",(function(e){$=e})),Z.react=!0;var Q=u(103),X=u(43),Y=Object.create(null),ee="function"==typeof Symbol&&Symbol.toPrimitive;function te(e){this.toString=e}function ne(e){return h((function(t,n){return e(t,n,!0)}),{html:function(t,n){return{__html:e(t,n)}},lazy:function(t,n){return new te(e.bind(0,t,n,!0))}})}function re(){return(0,Q.useObservableProperty)($,"language")}function ie(e,t){var n=new RegExp("^("+Object.keys(e[t]).join("|")+")\\."),r={};function i(n,r,i,o){var a=((e[$.language]||Y)[n]||Y)[r]||((e[t]||Y)[n]||Y)[r]||"";return!a||o&&void 0===i?a:X(a,i,{noEncode:o})}function o(e,t,r){var o=n.test(e)?RegExp.$1:"";return i(o,o?e.slice(RegExp.lastMatch.length):e,t,r)||e}return{translate:ne(o),useTranslation:function(){var e=g(arguments),t=re(),n=o;if(e[0]){var a=e.join(" ");n=r[a]||(r[a]=ne((function(t,n,r){return w(e,(function(e){return i(e,t,n,r)}))||t})))}return{language:t,t:n}}}}function oe(e){ae.call(this),this.attributes=e||{}}function ae(){}ee&&(te.prototype[ee]=function(){return this.toString()}),R(oe,ae,{getCustomAttributes:function(){return h({},this.attributes)}}),R(ae,{next:function(){},getRef:function(){return f},getClassNames:function(){return[]},getCustomAttributes:function(){return{}}}),j(ae.prototype),P(ae,{get scrollableTarget(){return new oe({"scrollable-target":""})},use:function(){var e=g(arguments),t=e[0],n={},r=e.filter((function(e){return e instanceof ae})),i=r.map((function(e){return e.getRef()}));return!t||t instanceof ae?t||e.shift():("function"!=typeof t?i.push((function(e){t.current=e})):i.push(t),e.shift()),v(r,(function(e,t){h(n,t.getCustomAttributes())})),h(n,{ref:M(i),className:Q.classNames.apply(null,e)}),v(r,(function(e,t){t.next()})),n}});var se=S();function ue(e){this.mixin=e}function ce(){ae.call(this),se(this,{states:{},prefix:"",counter:0})}R(ue,{getMixin:function(){return this.mixin}}),R(ce,ae,{get ref(){var e=this,t=e.state;return e.next(),t.ref||(t.ref=new ue(e.clone()))},get state(){var e=se(this),t=e.prefix+e.counter;return e.states[t]||(e.states[t]=this.initState())},reset:function(){return se(this).counter=0,this},next:function(){return se(this).counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n&&n!==t.element&&(t.element=n,e.initElement(n,t))}},elements:function(){return O(se(this).states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){var e=q(Object.getPrototypeOf(this));return se(e,{states:se(this).states,prefix:F()+".",counter:0}),e}});var le=ce.prototype;function fe(e,t,n,r){var i=n.classNames,o=h({},i);if(v(e.classNames,(function(e,n){i[n]=t.classList.contains(n)})),!E(o,i)){var a=e.onClassNameUpdated.bind(e,t,o,h({},i));r?setImmediate(a):a()}}function me(e){ce.call(this),this.classNames=e||[]}R(me,ce,{getClassNames:function(){return[this.state.classNames]},getRef:function(){var e=this,t=e.state.element;return t&&k(root,t)&&fe(e,t,e.state,!0),le.getRef.call(this)},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;_.watchAttributes(e,["class"],(function(r){r.includes(e)&&fe(n,e,t)}))},clone:function(){return h(le.clone.call(this),{classNames:this.classNames})},onClassNameUpdated:function(e,t,n){}});var de=me.prototype;function pe(){me.call(this,["tweening-in","tweening-out"])}R(pe,me,{next:function(){var e=this;return e.effects=void 0,e.trigger=void 0,de.next.call(e)},with:function(e){var t=this;return t.effects=e.effects,t.trigger=e.trigger,t},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return h({},de.getCustomAttributes.call(e),{"animate-in":(e.effects||[]).join(" "),"animate-on":e.trigger||"show"})}});var ge=me.prototype;function he(e){me.call(this,["tweening-in","tweening-out"]),this.className=e}R(he,me,{getClassNames:function(){return[this.className].concat(ge.getClassNames.call(this))}});var ve=pe.prototype,ye=0;function we(){var e=this;pe.call(e),e.className="brew-anim-"+ ++ye,e.item=new he(e.className)}R(we,pe,{reset:function(){return this.item.reset(),ve.reset.call(this)},getCustomAttributes:function(){return h({},ve.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return h(ve.clone.call(this),{item:this.item.ref.getMixin()})}});var be=s.EventContainer,xe=ce.prototype,Ce=new be;function Ee(){ce.call(this)}R(Ee,ce,{catch:function(e,t){return t||(t=e,e=null),Ce.add(this,e?"error":"default",(function(n){if(!e||function(e,t){return p(e)?d(t,e):t&&t.code===e}(e,n.error))return t(n.error)}))},initElement:function(e,t){var n=this;xe.initElement.call(n,e,t),_.on(e,"error",(function(e){var t={error:e.error};return Ce.emit("error",n,t)||Ce.emit("default",n,t)}))}});var Me=me.prototype,Se=0;function Ae(e){me.call(this,["target-opened"]),this.flyoutMixin=e}function Ne(){var e=this;me.call(e,["open","closing","tweening-in","tweening-out"]),e.modal=!1,e.isFlyoutOpened=!1,e.animating=!1,e.visible=!1,e.toggle=new Ae(e)}R(Ae,me,{getCustomAttributes:function(){var e=this.flyoutMixin.elements()[0];return h({},Me.getCustomAttributes.call(this),{toggle:e&&"#"+e.id})},clone:function(){return h(Me.clone.call(this),{flyoutMixin:this.flyoutMixin})}}),R(Ne,me,{reset:function(){return this.toggle.reset(),Me.reset.call(this)},next:function(){return this.effects=void 0,Me.next.call(this)},withEffects:function(){return this.effects=g(arguments),this},getCustomAttributes:function(){var e=this;return h({},Me.getCustomAttributes.call(e),{"is-flyout":"","swipe-dismiss":e.swipeToDismiss},e.modal&&{"is-modal":""},e.effects&&{"animate-on":"open","animate-in":e.effects.join(" "),"animate-out":""})},onOpen:function(e){return this.onToggleState((function(t){if(t)return e()}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;Me.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++Se),$.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){v(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=this,t=h(Me.clone.call(e),{toggle:e.toggle.ref.getMixin()});return I(t,"isFlyoutOpened",e),I(t,"modal",e),t},onClassNameUpdated:function(e,t,n){this.visible=n.open,this.isFlyoutOpened=n.open&&!n.closing&&!n["tweening-out"]}});var Oe=ce.prototype;function Pe(){ce.call(this)}R(Pe,ce,{initElement:function(e,t){Oe.initElement.call(this,e,t),_.on(e,{focusin:function(){t.focused=!0,z(e,"focused",!0)},focusout:function(){t.focused=!1,z(e,"focused",!1)}})},getClassNames:function(){return[{focused:!!this.state.focused}]}});var Re=ce.prototype;function Ie(){ce.call(this)}R(Ie,ce,{initElement:function(e,t){Re.initElement.call(this,e,t),_.on(e,{asyncStart:function(){t.loading=!0,z(e,"loading",!0)},asyncEnd:function(){t.loading=!1,z(e,"loading",!1)},cancelled:function(){t.loading=!1,z(e,"loading",!1)}})},getClassNames:function(){return[{loading:!!this.state.loading}]}});var je=me.prototype;function qe(){var e=this;me.call(e,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),e.target=ae.scrollableTarget,e.pageIndex=0}function Fe(e){h(this,e)}function Ve(e){return function(){var t=He(e);return(t.withOptions||Fe).apply(t,arguments),t}}R(qe,me,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return h({},je.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;$.on(e,"statechange",(function(e){"pageIndex"in e.newValues&&h(n,{pageIndex:e.newValues.pageIndex})}),!0)},clone:function(){var e=je.clone.call(this);return I(e,"pageIndex",this),e}});var Te=Ve(pe),ke=Ve(we),De=Ve(Ee),ze=Ve(Ne),Le=Ve(Pe),Ue=Ve(Ie),_e=Ve(qe);function He(e){return(0,o.useState)((function(){return new e}))[0].reset()}function We(e){return e&&e.getMixin().reset()}var Ge=t.animateIn,Be=t.animateOut,Ze=(t.addAnimateIn,t.addAnimateOut,new Map);function $e(){var e=this;o.Component.apply(e,arguments),e.mounted=!1,e.componentWillUnmount=$.on("navigate",(function(){e.mounted&&e.getViewComponent()&&e.forceUpdate()}))}function Je(e){var t=Ze.get(e);return!!t&&E(t,x($.route,N(t)))}function Ke(e,t){var n=function(t){var n=C(t,["rootProps","onComponentLoaded"]),r=(0,Q.useAsync)(e)[0];return o.createElement("div",h({},t.rootProps,{ref:function(e){e&&r&&(t.onComponentLoaded||f)(e)},children:r&&o.createElement(r.default,n)}))};return Ze.set(n,t),n}function Qe(){var e,t=g(arguments);return t[0]&&"function"!=typeof t[0]&&(e=t.shift()),o.createElement($e,h({},e,{views:t}))}function Xe(e,t){return $.route.getPath(h({},$.route,t,Ze.get(e)))}function Ye(e,t){return $.navigate(Xe(e,t))}function et(e,t){return $.navigate(Xe(e,t),!0)}R($e,o.Component,{componentDidMount:function(){this.mounted=!0},render:function(){var e=this,t=e.getViewComponent();return t&&t!==e.currentViewComponent&&(e.currentViewComponent=t,e.currentView&&e.currentElement&&(e.prevView=e.currentView,e.prevElement=e.currentElement,e.currentElement=void 0,Be(e.prevElement,"show").then((function(){e.prevElement=void 0,e.prevView=void 0,e.forceUpdate()}))),e.currentView=o.createElement(t,{key:$.route.view,rootProps:C(e.props,["views"]),onComponentLoaded:function(t){e.currentElement=t,A((function(){return Ge(t,"show")}))}})),o.createElement(o.Fragment,null,e.prevView,e.currentView)},getViewComponent:function(){var e=this.props.views;return y(e,Je)||void et(e[0])}});const tt=i,nt=e})(),c=c.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map