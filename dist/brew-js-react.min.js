!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("brew-js"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):"function"==typeof define&&define.amd?define("brew-js-react",["react","react-dom","brew-js","zeta-dom","zeta-dom-react","waterpipe"],t):"object"==typeof exports?exports["brew-js-react"]=t(require("react"),require("react-dom"),require("brew-js"),require("zeta-dom"),require("zeta-dom-react"),require("waterpipe")):e["brew-js-react"]=t(e.React,e.ReactDOM,e.brew,e.zeta,e["zeta-dom-react"],e.waterpipe)}(self,(function(e,t,n,i,r,o){return(()=>{var s={28:e=>{"use strict";e.exports=o},103:e=>{"use strict";e.exports=r},80:e=>{"use strict";e.exports=n},359:t=>{"use strict";t.exports=e},318:e=>{"use strict";e.exports=t},654:e=>{"use strict";e.exports=i},43:(e,t,n)=>{var i=window.waterpipe||n(28);e.exports=i}},a={};function u(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e](n,n.exports,u),n.exports}u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";u.d(c,{default:()=>Ae});var e={};u.r(e),u.d(e,{AnimateMixin:()=>ee,AnimateSequenceItemMixin:()=>ne,AnimateSequenceMixin:()=>oe,ClassNameMixin:()=>X,Dialog:()=>z,FlyoutMixin:()=>ue,FocusStateMixin:()=>le,LoadingStateMixin:()=>me,Mixin:()=>$,ScrollableMixin:()=>de,StatefulMixin:()=>K,createDialog:()=>k,linkTo:()=>Oe,makeTranslation:()=>H,registerView:()=>Ee,renderView:()=>Ne,useAnimateMixin:()=>ve,useAnimateSequenceMixin:()=>we,useAppReady:()=>L,useFlyoutMixin:()=>ge,useFocusStateMixin:()=>be,useLanguage:()=>B,useLoadingStateMixin:()=>ye,useMixinRef:()=>xe,useRouteParam:()=>U,useScrollableMixin:()=>he});var t=u(359),n=u(318),i=u(80),r=u(654),o=r.util,s=o.noop,a=o.either,l=(o.is,o.isUndefinedOrNull,o.isArray,o.isFunction,o.isThenable,o.isPlainObject,o.isArrayLike,o.makeArray),f=o.extend,m=o.each,p=(o.map,o.grep,o.splice,o.any),d=o.single,h=o.kv,g=o.pick,v=o.exclude,w=(o.mapGet,o.mapRemove,o.arrRemove,o.setAdd,o.equal),b=o.combineFn,y=(o.executeOnce,o.createPrivateStore,o.setTimeoutOnce,o.setImmediate),x=(o.setImmediateOnce,o.throwNotFunction,o.keys),C=o.values,S=(o.hasOwnProperty,o.getOwnPropertyDescriptors,o.define),E=o.definePrototype,N=(o.defineOwnProperty,o.defineGetterProperty,o.defineHiddenProperty,o.defineAliasProperty),O=(o.defineObservableProperty,o.watch,o.watchOnce,o.watchable),A=o.inherit,M=(o.deepFreeze,o.iequal,o.randomId),P=(o.repeat,o.camel,o.hyphenate,o.ucfirst,o.lcfirst,o.trim,o.matchWord,o.htmlDecode,o.resolve,o.reject,o.always),R=(o.resolveAll,o.catchAsync,o.setPromiseTimeout,r.util),j=(R.domReady,R.tagName,R.is,R.isVisible,R.matchSelector,R.comparePosition,R.connected,R.containsOrEquals),I=(R.acceptNode,R.combineNodeFilters,R.iterateNode,R.iterateNodeToArray,R.getCommonAncestor,R.parentsAndSelf,R.selectIncludeSelf,R.selectClosestRelative,R.createNodeIterator,R.createTreeWalker,R.bind,R.bindUntil,R.dispatchDOMMouseEvent,R.removeNode),q=(R.getClass,R.setClass);R.getScrollOffset,R.getScrollParent,R.getContentRect,R.scrollBy,R.scrollIntoView,R.createRange,R.rangeIntersects,R.rangeEquals,R.rangeCovers,R.compareRangePosition,R.makeSelection,R.getRect,R.getRects,R.toPlainRect,R.rectEquals,R.rectCovers,R.rectIntersects,R.pointInRect,R.mergeRect,R.elementFromPoint;const F=r.dom;var V=r.dom;V.textInputAllowed,V.beginDrag,V.beginPinchZoom,V.getShortcut,V.setShortcut,V.focusable,V.focused,V.setModal,V.retainFocus,V.releaseFocus,V.focus;const T=F;function k(e){var r,o=document.createElement("div"),a=!1;function u(t){a||(a=!0,i.closeFlyout(o,t).then((function(){a=!1,I(o),(e.onClose||s)(o),e.onRender&&n.unmountComponentAtNode(o)})))}return{root:o,close:u,open:function(){return r||(o.className=e.className||"",document.body.appendChild(o),T.retainFocus(T.activeElement,o),e.modal&&(o.setAttribute("is-modal",""),T.setModal(o)),e.onRender&&n.render(t.createElement(e.onRender,f({closeDialog:u},e)),o),r=i.openFlyout(o),P(r,(function(){r=null})),r.then(e.onCommit),(e.onOpen||s)(o),r)}}}function z(e){var i=(0,t.useState)(e)[0],r=(0,t.useState)((function(){return k(i)}))[0];return f(i,e),(0,t.useEffect)((function(){var e=j(T.root,r.root);a(e,i.isOpen)&&(e?r.close():r.open())}),[i.isOpen]),(0,t.useEffect)((function(){return r.close}),[r]),n.createPortal(e.children,r.root)}var D;function L(){var e=(0,t.useState)(!1),n=e[0],i=e[1];return(0,t.useEffect)((function(){D.ready.then((function(){i(!0)}))}),[]),n}function U(e,n){var i=(0,t.useState)(D.route[e]),r=i[0],o=i[1];return(0,t.useEffect)((function(){var t=D.route[e];return o(t),D.route.watch(e,o)}),[e,n]),r||void 0===n||D.navigate(D.route.getPath(f({},D.route,h(e,n))),!0),r||""}i.install("react",(function(e){D=e})),i.defaults.react=!0;var _=u(103),W=u(43),G=Object.create(null);function B(){return(0,_.useObservableProperty)(D,"language")}function H(e,t){var n=new RegExp("^("+Object.keys(e[t]).join("|")+")\\."),i={};function r(n,i,r){var o=((e[D.language]||G)[n]||G)[i]||((e[t]||G)[n]||G)[i]||"";return o&&void 0!==r?W(o,r):o}function o(e){return f(e,{html:function(t,n){return{__html:e(t,n)}}})}function s(e,t){var i=n.test(e)?RegExp.$1:"";return r(i,i?e.slice(RegExp.lastMatch.length):e,t)||e}return{translate:o(s),useTranslation:function(){var e=l(arguments),t=B(),n=s;if(e[0]){var a=e.join(" ");n=i[a]||(i[a]=o((function(t,n){return d(e,(function(e){return r(e,t,n)}))||t})))}return{language:t,t:n}}}}function Z(e){$.call(this),this.attributes=e||{}}function $(){}function J(e){this.mixin=e}function K(){$.call(this),this.states={},this.prefix="",this.counter=0}E(Z,$,{getCustomAttributes:function(){return f({},this.attributes)}}),E($,{next:function(){},getRef:function(){return s},getClassNames:function(){return[]},getCustomAttributes:function(){return{}}}),O($.prototype),S($,{get scrollableTarget(){return new Z({"scrollable-target":""})},use:function(){var e=l(arguments),t=e[0],n={},i=e.filter((function(e){return e instanceof $})),r=i.map((function(e){return e.getRef()}));return!t||t instanceof $?t||e.shift():("function"!=typeof t?r.push((function(e){t.current=e})):r.push(t),e.shift()),m(i,(function(e,t){f(n,t.getCustomAttributes())})),f(n,{ref:b(r),className:_.classNames.apply(null,e)}),m(i,(function(e,t){t.next()})),n}}),E(J,{getMixin:function(){return this.mixin}}),E(K,$,{get ref(){var e=this.state;return this.next(),e.ref||(e.ref=new J(this.clone()))},get state(){var e=this,t=e.prefix+e.counter;return e.states[t]||(e.states[t]=e.initState())},reset:function(){return this.counter=0,this},next:function(){return this.counter++,this},getRef:function(){var e=this,t=e.state;return function(n){n&&n!==t.element&&(t.element=n,e.initElement(n,t))}},elements:function(){return C(this.states).map((function(e){return e.element})).filter((function(e){return e}))},initState:function(){return{element:null}},initElement:function(e,t){},clone:function(){return A(Object.getPrototypeOf(this),{states:this.states,prefix:M()+".",counter:0})}});var Q=K.prototype;function X(e){K.call(this),this.classNames=e||[]}E(X,K,{getClassNames:function(){return[this.state.classNames]},initState:function(){return{element:null,classNames:{}}},initElement:function(e,t){var n=this;T.watchAttributes(e,["class"],(function(i){if(i.includes(e)){var r=f({},t.classNames);m(n.classNames,(function(n,i){t.classNames[i]=e.classList.contains(i)})),w(r,t.classNames)||n.onClassNameUpdated(e,r,t.classNames)}}))},clone:function(){return f(Q.clone.call(this),{classNames:this.classNames})},onClassNameUpdated:function(e,t,n){}});var Y=X.prototype;function ee(){X.call(this,["tweening-in","tweening-out"])}E(ee,X,{next:function(){return this.effects=void 0,this.trigger=void 0,Y.next.call(this)},with:function(e){return this.effects=e.effects,this.trigger=e.trigger,this},withEffects:function(){return this.effects=l(arguments),this},getCustomAttributes:function(){return f({},Y.getCustomAttributes.call(this),{"animate-in":(this.effects||[]).join(" "),"animate-on":this.trigger||"show"})}});var te=X.prototype;function ne(e){X.call(this,["tweening-in","tweening-out"]),this.className=e}E(ne,X,{getClassNames:function(){return[this.className].concat(te.getClassNames.call(this))}});var ie=ee.prototype,re=0;function oe(){ee.call(this),this.className="brew-anim-"+ ++re,this.item=new ne(this.className)}E(oe,ee,{reset:function(){return this.item.reset(),ie.reset.call(this)},getCustomAttributes:function(){return f({},ie.getCustomAttributes.call(this),{"animate-sequence":"."+this.className})},clone:function(){return f(ie.clone.call(this),{item:this.item.ref.getMixin()})}});var se=X.prototype,ae=0;function ue(){X.call(this,["open","closing","tweening-in","tweening-out"]),this.isFlyoutOpened=!1,this.animating=!1,this.visible=!1,this.toggle=new X(["target-opened"])}E(ue,X,{reset:function(){return this.toggle.reset(),se.reset.call(this)},next:function(){return this.effects=void 0,se.next.call(this)},withEffects:function(){return this.effects=l(arguments),this},getCustomAttributes:function(){return f({},se.getCustomAttributes.call(this),{"is-flyout":""},this.effects&&{"animate-on":"open","animate-in":this.effects.join(" "),"animate-out":""})},onOpen:function(e){return this.onToggleState((function(t){if(t)return e()}))},onToggleState:function(e){return this.watch("isFlyoutOpened",e)},onVisibilityChanged:function(e){return this.watch("visible",e)},initElement:function(e,t){var n=this;se.initElement.call(n,e,t),e.id||(e.id="flyout-"+ ++ae),D.on(e,{animationstart:function(){n.animating=!0},animationcomplete:function(){n.animating=!1}},!0),setImmediate((function(){m(n.toggle.elements(),(function(t,n){n.setAttribute("toggle","#"+e.id)}))}))},clone:function(){var e=f(se.clone.call(this),{toggle:this.toggle.ref.getMixin()});return N(e,"isFlyoutOpened",this),e},onClassNameUpdated:function(e,t,n){var i,r=this,o=function(e){return t[e]!==n[e]&&n[e]};o("open")?(r.isFlyoutOpened=!0,r.visible=!0):o("closing")||o("tweening-out")?r.isFlyoutOpened=!1:t[i="open"]===n[i]||n[i]||(r.visible=!1)}});var ce=X.prototype;function le(){X.call(this,["focused"])}E(le,X,{initElement:function(e,t){ce.initElement.call(this,e,t),T.on(e,{focusin:function(){q(e,"focused",!0)},focusout:function(){q(e,"focused",!1)}})}});var fe=X.prototype;function me(){X.call(this,["loading"])}E(me,X,{initElement:function(e,t){fe.initElement.call(this,e,t),T.on(e,{asyncStart:function(){q(e,"loading",!0)},asyncEnd:function(){q(e,"loading",!1)},cancelled:function(){q(e,"loading",!1)}})}});var pe=X.prototype;function de(){X.call(this,["scrollable-x","scrollable-x-l","scrollable-x-r","scrollable-y","scrollable-y-d","scrollable-y-u"]),this.target=$.scrollableTarget,this.pageIndex=0}function he(e){return(0,t.useState)((function(){return new de}))[0].reset().withOptions(e)}function ge(){return(0,t.useState)((function(){return new ue}))[0].reset()}function ve(){return(0,t.useState)((function(){return new ee}))[0].reset()}function we(){return(0,t.useState)((function(){return new oe}))[0].reset()}function be(){return(0,t.useState)((function(){return new le}))[0].reset()}function ye(){return(0,t.useState)((function(){return new me}))[0].reset()}function xe(e){return e.getMixin().reset()}E(de,X,{withOptions:function(e){return this.options=e,this},getCustomAttributes:function(){var e=this.options||{};return f({},pe.getCustomAttributes.call(this),{scrollable:[e.direction||"both",e.handle||"auto"].join(" ")},e.paged&&{var:"{ pageIndex: 0 }","scroller-snap-page":e.paged,"scroller-page":e.pagedItemSelector,"scroller-state":"pageIndex"})},onPageIndexChanged:function(e){return this.watch("pageIndex",e)},initElement:function(e,t){var n=this;D.on(e,"statechange",(function(e){"pageIndex"in e.newValues&&f(n,{pageIndex:e.newValues.pageIndex})}),!0)},clone:function(){var e=pe.clone.call(this);return N(e,"pageIndex",this),e}});var Ce=new Map;function Se(){var e=this;t.Component.apply(e,arguments),e.mounted=!1,e.componentWillUnmount=D.on("navigate",(function(){e.mounted&&e.getViewComponent()&&e.forceUpdate()}))}function Ee(e,n){var i=function(n){var i=v(n,["rootProps","onComponentLoaded"]),r=(0,_.useAsync)(e)[0];return t.createElement("div",f({},n.rootProps,{ref:function(e){e&&r&&(n.onComponentLoaded||s)(e)},children:r&&t.createElement(r.default,i)}))};return Ce.set(i,n),i}function Ne(){var e,n=l(arguments);return n[0]&&"function"!=typeof n[0]&&(e=n.shift()),t.createElement(Se,f({},e,{views:n}))}function Oe(e,t){return D.route.getPath(f({},D.route,t,Ce.get(e)))}E(Se,t.Component,{componentDidMount:function(){this.mounted=!0},render:function(){var e=this,n=e.getViewComponent();return n&&n!==e.currentViewComponent&&(e.currentViewComponent=n,e.currentView&&e.currentElement&&(e.prevView=e.currentView,e.prevElement=e.currentElement,e.currentElement=void 0,i.animateOut(e.prevElement,"show").then((function(){e.prevElement=void 0,e.prevView=void 0,e.forceUpdate()}))),e.currentView=t.createElement(n,{key:D.route.view,rootProps:v(e.props,["views"]),onComponentLoaded:function(t){e.currentElement=t,y((function(){return i.animateIn(t,"show")}))}})),t.createElement(t.Fragment,null,e.prevView,e.currentView)},getViewComponent:function(){var e=this.props.views;return p(e,(function(e){var t=Ce.get(e);return t&&w(t,g(D.route,x(t)))}))||void D.navigate(Oe(e[0]),!0)}});const Ae=e})(),c=c.default})()}));
//# sourceMappingURL=brew-js-react.min.js.map